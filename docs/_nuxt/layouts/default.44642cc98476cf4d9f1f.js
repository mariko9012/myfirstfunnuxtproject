webpackJsonp([5],{"/5zr":function(t,a,e){"use strict";var n=e("EsfK");a.a={components:{Map:n.a},data:function(){return{active:"map"}}}},"/unj":function(t,a,e){"use strict";var n=e("/5zr"),r=e("ec1M"),i=e("XyMi"),o=!1;var s=function(t){o||e("OInh")},c=Object(i.a)(n.a,r.a,r.b,!1,s,"data-v-0816331a",null);c.options.__file="components/Canvas.vue",a.a=c.exports},"18GM":function(t,a,e){"use strict";var n=e("Dd8w"),r=e.n(n),i=e("fZjL"),o=e.n(i),s=e("gRE1"),c=e.n(s),u=e("BO1k"),l=e.n(u),p=e("blTI").key;a.a={data:function(){return{map:null,currentMarkers:[],componentReady:!1,styleReady:!1}},computed:{mapMarkers:function(){return this.$store.state.mapMarkers},highlight:function(){return this.$store.state.highlight},uniqueLocations:function(){var t={},a=!0,e=!1,n=void 0;try{for(var r,i=l()(this.mapMarkers);!(a=(r=i.next()).done);a=!0){var o=r.value;if(o.location){var s=o.location.toLowerCase();t[s]||(t[s]=[]),t[s].push(o)}}}catch(t){e=!0,n=t}finally{try{!a&&i.return&&i.return()}finally{if(e)throw n}}return t},markerData:function(){if(this.uniqueLocations){var t={type:"FeatureCollection",features:[]},a=!0,e=!1,n=void 0;try{for(var r,i=l()(c()(this.uniqueLocations));!(a=(r=i.next()).done);a=!0){var o=r.value;t.features.push({type:"Feature",geometry:{type:"Point",coordinates:o[0].center},properties:{location:o[0].location}})}}catch(t){e=!0,n=t}finally{try{!a&&i.return&&i.return()}finally{if(e)throw n}}return t}},mapPosition:function(){if(this.uniqueLocations&&0!==o()(this.uniqueLocations).length){if(1===this.mapMarkers.length)return this.mapMarkers[0];var t=0,a=0,e=0,n=c()(this.uniqueLocations),i=n.length,s=!0,u=!1,p=void 0;try{for(var f,d=l()(n);!(s=(f=d.next()).done);s=!0){var h=f.value;t+=h[0].center[0],a+=h[0].center[1],e+=h[0].zoom}}catch(t){u=!0,p=t}finally{try{!s&&d.return&&d.return()}finally{if(u)throw p}}var v=r()({},n[0][0]);return v.center=[t/i,a/i],v.zoom=e/i-1,v}}},watch:{mapPosition:function(t){this.tryUpdateMap(t)},markerData:function(t){t&&this.recalculateMarkerData()},highlight:function(t,a){var e=this,n=function(t){var a=e.currentMarkers.find(function(a){return a._popup.options.location===t});a&&a._element.classList.remove("highlight")},r=!0,i=!1,o=void 0;try{for(var s,c=l()(a);!(r=(s=c.next()).done);r=!0){n(s.value)}}catch(t){i=!0,o=t}finally{try{!r&&c.return&&c.return()}finally{if(i)throw o}}var u=function(t){var a=e.currentMarkers.find(function(a){return a._popup.options.location===t});a&&a._element.classList.add("highlight")},p=!0,f=!1,d=void 0;try{for(var h,v=l()(t);!(p=(h=v.next()).done);p=!0){u(h.value)}}catch(t){f=!0,d=t}finally{try{!p&&v.return&&v.return()}finally{if(f)throw d}}}},mounted:function(){this.componentReady=!0,this.tryUpdateMap()},methods:{tryUpdateMap:function(){var t=this;if(!this.componentReady||!window.mapboxgl||!this.mapPosition)return setTimeout(function(){return t.tryUpdateMap()},200);mapboxgl.accessToken=p;var a=this.mapPosition||{bearing:0,center:[180,0],zoom:1,pitch:0};this.map?this.map.flyTo(a):(console.log("creating map"),this.map=new mapboxgl.Map(r()({container:"map",style:"mapbox://styles/mariko9012/cjh4gkzlw31mc2sqsm3l0g4rk"},a)),this.map.on("styledata",function(){return setTimeout(function(){return t.styleReady=!0},300)}),this.recalculateMarkerData())},routeTo:function(t){this.$router.push("/at/"+t.replace(" ","%20"))},recalculateMarkerData:function(){var t=this;this.componentReady&&window.mapboxgl&&this.map&&(this.currentMarkers.forEach(function(t){t.remove()}),this.currentMarkers=[],this.markerData.features.sort(function(t,a){return t.geometry.coordinates[1]<a.geometry.coordinates[1]}).forEach(function(a){console.log(a);var e=new mapboxgl.Popup({offset:20,closeButton:!1,location:a.properties.location}),n=document.createElement("div");n.className="marker";var r=document.createElement("div");r.className="pin";var i=document.createElement("div");i.className="text";var o=document.createTextNode(a.properties.location);i.appendChild(o),n.appendChild(i),n.appendChild(r),n.addEventListener("click",function(e){return t.routeTo(a.properties.location)});var s=new mapboxgl.Marker(n).setLngLat(a.geometry.coordinates).setPopup(e).addTo(t.map);t.currentMarkers.push(s)}))}}}},EsfK:function(t,a,e){"use strict";var n=e("18GM"),r=e("zJtH"),i=e("XyMi"),o=!1;var s=function(t){o||e("Fmhe")},c=Object(i.a)(n.a,r.a,r.b,!1,s,"data-v-c8faa70c",null);c.options.__file="components/CanvasFills/Map.vue",a.a=c.exports},Fmhe:function(t,a,e){var n=e("XNJ5");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,e("rjj0").default)("68342ee1",n,!1,{sourceMap:!1})},HuUw:function(t,a,e){var n=e("hVKq");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,e("rjj0").default)("23bbc751",n,!1,{sourceMap:!1})},Ma2J:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("ShCn"),r=e("faFM"),i=e("XyMi"),o=!1;var s=function(t){o||e("HuUw")},c=Object(i.a)(n.a,r.a,r.b,!1,s,null,null);c.options.__file="layouts/default.vue",a.default=c.exports},Ni6p:function(t,a,e){"use strict";e.d(a,"a",function(){return n}),e.d(a,"b",function(){return r});var n=function(){var t=this.$createElement,a=this._self._c||t;return a("div",{attrs:{id:"header"}},[a("nuxt-link",{staticClass:"logo",attrs:{exact:"",to:"/"}},[a("h1",[this._v("Traveling Circus of Urbanism")])]),a("br"),a("div",{staticClass:"sublinks"},[a("nuxt-link",{attrs:{to:"/about"}},[this._v("About")]),a("nuxt-link",{attrs:{to:"/author"}},[this._v("Author")])],1)],1)},r=[];n._withStripped=!0},OInh:function(t,a,e){var n=e("jx0H");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,e("rjj0").default)("2d2f45a2",n,!1,{sourceMap:!1})},ShCn:function(t,a,e){"use strict";var n=e("/unj"),r=e("YXP+");a.a={components:{Canvas:n.a,Header:r.default}}},TmV0:function(t,a,e){e("fZOM"),t.exports=e("FeBl").Object.values},XNJ5:function(t,a,e){(t.exports=e("FZ+f")(!1)).push([t.i,"#map[data-v-c8faa70c]{height:120vh!important;top:-10vh;opacity:0;-webkit-transition:opacity 3s;transition:opacity 3s}#map.ready[data-v-c8faa70c]{opacity:1}",""])},"YXP+":function(t,a,e){"use strict";var n=e("bBm1"),r=e.n(n),i=e("Ni6p"),o=e("XyMi"),s=!1;var c=function(t){s||e("d9eo")},u=Object(o.a)(r.a,i.a,i.b,!1,c,"data-v-1a9bb128",null);u.options.__file="components/Header.vue",a.default=u.exports},bBm1:function(t,a){},blTI:function(t,a){t.exports={key:"pk.eyJ1IjoibWFyaWtvOTAxMiIsImEiOiJjaWt0cnk4MnMwMDB2eDFtMDh1bmozZ2gwIn0.zXoiIU4RmB7jKIgBrs0Vwg"}},c2gz:function(t,a,e){(t.exports=e("FZ+f")(!1)).push([t.i,"a[data-v-1a9bb128],a[data-v-1a9bb128]:active,a[data-v-1a9bb128]:hover,a[data-v-1a9bb128]:visited{display:inline-block;color:#fff;background:#222;text-decoration:none;-webkit-transition:.2s;transition:.2s;pointer-events:auto}a[data-v-1a9bb128]:hover{background:#00adcc}#header[data-v-1a9bb128]{position:fixed;display:inline-block;top:30px;left:30px;z-index:10;height:auto;pointer-events:none}.logo[data-v-1a9bb128]{display:inline-block;text-transform:uppercase;font-family:Unica One,Raleway,sans-serif;padding:24px;font-weight:600;border-left:6px solid #00adcc}h1[data-v-1a9bb128]{font-size:32px;font-size:2rem;margin:0}.sublinks[data-v-1a9bb128]{display:inline-block;margin-top:6px;font-weight:400}.sublinks a[data-v-1a9bb128]{padding:12px 24px;margin-right:6px}",""])},d9eo:function(t,a,e){var n=e("c2gz");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,e("rjj0").default)("1d2bea6a",n,!1,{sourceMap:!1})},ec1M:function(t,a,e){"use strict";e.d(a,"a",function(){return n}),e.d(a,"b",function(){return r});var n=function(){var t=this.$createElement,a=this._self._c||t;return a("div",{attrs:{id:"canvas"}},["map"===this.active?a("Map",{staticClass:"fill"}):this._e()],1)},r=[];n._withStripped=!0},fZOM:function(t,a,e){var n=e("kM2E"),r=e("mbce")(!1);n(n.S,"Object",{values:function(t){return r(t)}})},faFM:function(t,a,e){"use strict";e.d(a,"a",function(){return n}),e.d(a,"b",function(){return r});var n=function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"master"},[a("Header"),a("Canvas"),a("nuxt")],1)},r=[];n._withStripped=!0},gRE1:function(t,a,e){t.exports={default:e("TmV0"),__esModule:!0}},hVKq:function(t,a,e){(t.exports=e("FZ+f")(!1)).push([t.i,".master{display:-webkit-box;display:-ms-flexbox;display:flex;overflow:hidden;width:100vw;height:100vh}.master>*{-webkit-box-flex:1;-ms-flex:1;flex:1;max-width:50%;overflow:hidden}.master>:not(#map){overflow-y:auto;height:100vh}",""])},jx0H:function(t,a,e){(t.exports=e("FZ+f")(!1)).push([t.i,"#canvas[data-v-0816331a]{background:#555;z-index:2;position:relative}#canvas>.fill[data-v-0816331a]{position:relative;height:100vh;width:100%}",""])},mbce:function(t,a,e){var n=e("lktj"),r=e("TcQ7"),i=e("NpIQ").f;t.exports=function(t){return function(a){for(var e,o=r(a),s=n(o),c=s.length,u=0,l=[];c>u;)i.call(o,e=s[u++])&&l.push(t?[e,o[e]]:o[e]);return l}}},zJtH:function(t,a,e){"use strict";e.d(a,"a",function(){return n}),e.d(a,"b",function(){return r});var n=function(){var t=this.$createElement;return(this._self._c||t)("div",{class:{ready:this.styleReady},attrs:{id:"map"}})},r=[];n._withStripped=!0}});