webpackJsonp([3],{"/unj":function(t,e,a){"use strict";var n=a("qsFG"),i=a("ec1M"),r=a("XyMi"),o=!1;var s=function(t){o||a("CxHX")},c=Object(r.a)(n.a,i.a,i.b,!1,s,"data-v-0816331a",null);c.options.__file="components/Canvas.vue",e.a=c.exports},"2eFw":function(t,e,a){"use strict";var n=a("Dd8w"),i=a.n(n),r=a("fZjL"),o=a.n(r),s=a("Gu7T"),c=a.n(s),u=a("gRE1"),l=a.n(u),f=a("BO1k"),p=a.n(f),d=a("blTI").key;e.a={data:function(){return{map:null,currentMarkers:[],componentReady:!1,styleReady:!1}},computed:{mapMarkers:function(){return this.$store.state.mapMarkers},highlight:function(){return this.$store.state.highlightedLocation},uniqueLocations:function(){var t={},e=!0,a=!1,n=void 0;try{for(var i,r=p()(this.mapMarkers);!(e=(i=r.next()).done);e=!0){var o=i.value;if(o.locationName){var s=o.locationName.toLowerCase();t[s]||(t[s]=[]),t[s].push(o)}}}catch(t){a=!0,n=t}finally{try{!e&&r.return&&r.return()}finally{if(a)throw n}}return t},markerData:function(){if(this.uniqueLocations){var t={type:"FeatureCollection",features:[]},e=!0,a=!1,n=void 0;try{for(var i,r=p()(l()(this.uniqueLocations));!(e=(i=r.next()).done);e=!0){var o=i.value;t.features.push({type:"Feature",geometry:{type:"Point",coordinates:[o[0].position.center[0],o[0].position.center[1]]},properties:{locationName:o[0].locationName,posts:[].concat(c()(o))}})}}catch(t){a=!0,n=t}finally{try{!e&&r.return&&r.return()}finally{if(a)throw n}}return t}},mapPosition:function(){if(this.uniqueLocations&&0!==o()(this.uniqueLocations).length){if(1===this.mapMarkers.length)return this.mapMarkers[0].position;var t=0,e=0,a=0,n=l()(this.uniqueLocations),r=n.length,s=!0,c=!1,u=void 0;try{for(var f,d=p()(n);!(s=(f=d.next()).done);s=!0){var h=f.value;t+=h[0].position.center[0],e+=h[0].position.center[1],a+=h[0].position.zoom}}catch(t){c=!0,u=t}finally{try{!s&&d.return&&d.return()}finally{if(c)throw u}}var v=i()({},n[0][0].position);return v.center=[t/r,e/r],v.zoom=a/r-1,v}}},watch:{mapPosition:function(t){this.tryUpdateMap(t)},markerData:function(t){t&&this.recalculateMarkerData()},highlight:function(t,e){var a=this.currentMarkers.find(function(t){return t._popup.options.location===e});a&&a._element.classList.remove("highlight");var n=this.currentMarkers.find(function(e){return e._popup.options.location===t});n&&n._element.classList.add("highlight")}},mounted:function(){this.componentReady=!0,this.tryUpdateMap()},methods:{tryUpdateMap:function(){var t=this;if(!this.componentReady||!window.mapboxgl||!this.mapPosition)return setTimeout(function(){return t.tryUpdateMap()},200);mapboxgl.accessToken=d;var e=this.mapPosition||{bearing:0,center:[180,0],zoom:1,pitch:0};this.map?this.map.flyTo(e):(console.log("creating map"),this.map=new mapboxgl.Map(i()({container:"map",style:"mapbox://styles/mariko9012/cjh4gkzlw31mc2sqsm3l0g4rk"},e)),this.map.on("styledata",function(){return setTimeout(function(){return t.styleReady=!0},300)}),this.recalculateMarkerData())},routeTo:function(t){this.$router.push("/at/"+t.replace(" ","%20"))},recalculateMarkerData:function(){var t=this;this.componentReady&&window.mapboxgl&&this.map&&(this.currentMarkers.forEach(function(t){t.remove()}),this.currentMarkers=[],this.markerData.features.sort(function(t,e){return t.geometry.coordinates[1]<e.geometry.coordinates[1]}).forEach(function(e){var a=new mapboxgl.Popup({offset:20,closeButton:!1,location:e.properties.locationName}),n=document.createElement("div");n.className="marker";var i=document.createElement("div");i.className="pin";var r=document.createElement("div");r.className="text";var o=document.createTextNode(e.properties.locationName);r.appendChild(o),n.appendChild(r),n.appendChild(i),n.addEventListener("click",function(a){return t.routeTo(e.properties.locationName)});var s=new mapboxgl.Marker(n).setLngLat(e.geometry.coordinates).setPopup(a).addTo(t.map);t.currentMarkers.push(s)}))}}}},"5zde":function(t,e,a){a("zQR9"),a("qyJz"),t.exports=a("FeBl").Array.from},"8qeQ":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"#map[data-v-c8faa70c]{height:120vh!important;top:-10vh;opacity:0;-webkit-transition:opacity 3s;transition:opacity 3s}#map.ready[data-v-c8faa70c]{opacity:1}",""])},CxHX:function(t,e,a){var n=a("OAO3");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a("rjj0").default)("014d148b",n,!1,{sourceMap:!1})},Czsj:function(t,e,a){var n=a("8qeQ");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a("rjj0").default)("9c968a86",n,!1,{sourceMap:!1})},EsfK:function(t,e,a){"use strict";var n=a("2eFw"),i=a("zJtH"),r=a("XyMi"),o=!1;var s=function(t){o||a("Czsj")},c=Object(r.a)(n.a,i.a,i.b,!1,s,"data-v-c8faa70c",null);c.options.__file="components/CanvasFills/Map.vue",e.a=c.exports},Gu7T:function(t,e,a){"use strict";e.__esModule=!0;var n,i=a("c/Tr"),r=(n=i)&&n.__esModule?n:{default:n};e.default=function(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return(0,r.default)(t)}},KxRS:function(t,e){},Ma2J:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("znfv"),i=a("faFM"),r=a("XyMi"),o=!1;var s=function(t){o||a("S/TH")},c=Object(r.a)(n.a,i.a,i.b,!1,s,null,null);c.options.__file="layouts/default.vue",e.default=c.exports},Ni6p:function(t,e,a){"use strict";a.d(e,"a",function(){return n}),a.d(e,"b",function(){return i});var n=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"header"}},[e("nuxt-link",{staticClass:"logo",attrs:{exact:"",to:"/"}},[e("h1",[this._v("Traveling Circus of Urbanism")])]),e("br"),e("div",{staticClass:"sublinks"},[e("nuxt-link",{attrs:{to:"/about"}},[this._v("About")]),e("nuxt-link",{attrs:{to:"/author"}},[this._v("Author")])],1)],1)},i=[];n._withStripped=!0},OAO3:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"#canvas[data-v-0816331a]{background:#555;z-index:2;position:relative}#canvas>.fill[data-v-0816331a]{position:relative;height:100vh;width:100%}",""])},"S/TH":function(t,e,a){var n=a("gZMq");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a("rjj0").default)("34a0d975",n,!1,{sourceMap:!1})},TmV0:function(t,e,a){a("fZOM"),t.exports=a("FeBl").Object.values},"YXP+":function(t,e,a){"use strict";var n=a("KxRS"),i=a.n(n),r=a("Ni6p"),o=a("XyMi"),s=!1;var c=function(t){s||a("mQNf")},u=Object(o.a)(i.a,r.a,r.b,!1,c,"data-v-1a9bb128",null);u.options.__file="components/Header.vue",e.default=u.exports},blTI:function(t,e){t.exports={key:"pk.eyJ1IjoibWFyaWtvOTAxMiIsImEiOiJjaWt0cnk4MnMwMDB2eDFtMDh1bmozZ2gwIn0.zXoiIU4RmB7jKIgBrs0Vwg"}},"c/Tr":function(t,e,a){t.exports={default:a("5zde"),__esModule:!0}},ec1M:function(t,e,a){"use strict";a.d(e,"a",function(){return n}),a.d(e,"b",function(){return i});var n=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"canvas"}},["map"===this.active?e("Map",{staticClass:"fill"}):this._e()],1)},i=[];n._withStripped=!0},fBQ2:function(t,e,a){"use strict";var n=a("evD5"),i=a("X8DO");t.exports=function(t,e,a){e in t?n.f(t,e,i(0,a)):t[e]=a}},fZOM:function(t,e,a){var n=a("kM2E"),i=a("mbce")(!1);n(n.S,"Object",{values:function(t){return i(t)}})},faFM:function(t,e,a){"use strict";a.d(e,"a",function(){return n}),a.d(e,"b",function(){return i});var n=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"master"},[e("Header"),e("Canvas"),e("nuxt")],1)},i=[];n._withStripped=!0},gRE1:function(t,e,a){t.exports={default:a("TmV0"),__esModule:!0}},gZMq:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".master{display:-webkit-box;display:-ms-flexbox;display:flex;overflow:hidden;width:100vw;height:100vh}.master>*{-webkit-box-flex:1;-ms-flex:1;flex:1;max-width:50%;overflow:hidden}.master>:not(#map){overflow-y:auto;height:100vh}",""])},mQNf:function(t,e,a){var n=a("on+n");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a("rjj0").default)("3510a1c6",n,!1,{sourceMap:!1})},mbce:function(t,e,a){var n=a("lktj"),i=a("TcQ7"),r=a("NpIQ").f;t.exports=function(t){return function(e){for(var a,o=i(e),s=n(o),c=s.length,u=0,l=[];c>u;)r.call(o,a=s[u++])&&l.push(t?[a,o[a]]:o[a]);return l}}},"on+n":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"a[data-v-1a9bb128],a[data-v-1a9bb128]:active,a[data-v-1a9bb128]:hover,a[data-v-1a9bb128]:visited{display:inline-block;color:#fff;background:#222;text-decoration:none;-webkit-transition:.2s;transition:.2s;pointer-events:auto}a[data-v-1a9bb128]:hover{background:#00adcc}#header[data-v-1a9bb128]{position:fixed;display:inline-block;top:30px;left:30px;z-index:10;height:auto;pointer-events:none}.logo[data-v-1a9bb128]{display:inline-block;text-transform:uppercase;font-family:Unica One,Raleway,sans-serif;padding:24px;font-weight:600;border-left:6px solid #00adcc}h1[data-v-1a9bb128]{font-size:32px;font-size:2rem;margin:0}.sublinks[data-v-1a9bb128]{display:inline-block;margin-top:6px;font-weight:400}.sublinks a[data-v-1a9bb128]{padding:12px 24px;margin-right:6px}",""])},qsFG:function(t,e,a){"use strict";var n=a("EsfK");e.a={components:{Map:n.a},data:function(){return{active:"map"}}}},qyJz:function(t,e,a){"use strict";var n=a("+ZMJ"),i=a("kM2E"),r=a("sB3e"),o=a("msXi"),s=a("Mhyx"),c=a("QRG4"),u=a("fBQ2"),l=a("3fs2");i(i.S+i.F*!a("dY0y")(function(t){Array.from(t)}),"Array",{from:function(t){var e,a,i,f,p=r(t),d="function"==typeof this?this:Array,h=arguments.length,v=h>1?arguments[1]:void 0,m=void 0!==v,y=0,b=l(p);if(m&&(v=n(v,h>2?arguments[2]:void 0,2)),void 0==b||d==Array&&s(b))for(a=new d(e=c(p.length));e>y;y++)u(a,y,m?v(p[y],y):p[y]);else for(f=b.call(p),a=new d;!(i=f.next()).done;y++)u(a,y,m?o(f,v,[i.value,y],!0):i.value);return a.length=y,a}})},zJtH:function(t,e,a){"use strict";a.d(e,"a",function(){return n}),a.d(e,"b",function(){return i});var n=function(){var t=this.$createElement;return(this._self._c||t)("div",{class:{ready:this.styleReady},attrs:{id:"map"}})},i=[];n._withStripped=!0},znfv:function(t,e,a){"use strict";var n=a("/unj"),i=a("YXP+");e.a={components:{Canvas:n.a,Header:i.default}}}});