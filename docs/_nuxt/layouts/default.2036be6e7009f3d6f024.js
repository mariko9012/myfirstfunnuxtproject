webpackJsonp([3],{"+VuX":function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,"a[data-v-1a9bb128],a[data-v-1a9bb128]:active,a[data-v-1a9bb128]:hover,a[data-v-1a9bb128]:visited{display:inline-block;color:#fff;background:#222;text-decoration:none;-webkit-transition:.2s;transition:.2s;pointer-events:auto}a[data-v-1a9bb128]:hover{background:#00adcc}#header[data-v-1a9bb128]{position:fixed;display:inline-block;top:30px;left:30px;z-index:10;height:auto;pointer-events:none}.logo[data-v-1a9bb128]{display:inline-block;text-transform:uppercase;font-family:Unica One,Raleway,sans-serif;padding:24px;font-weight:600;border-left:6px solid #00adcc}h1[data-v-1a9bb128]{font-size:32px;font-size:2rem;margin:0}.sublinks[data-v-1a9bb128]{display:inline-block;margin-top:6px;font-weight:400}.sublinks a[data-v-1a9bb128]{padding:12px 24px;margin-right:6px}",""])},"/EEK":function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,".master{display:-webkit-box;display:-ms-flexbox;display:flex;overflow:hidden;width:100vw;height:100vh}.master>*{-webkit-box-flex:1;-ms-flex:1;flex:1;max-width:50%;overflow:hidden}.master>:not(#map){overflow-y:auto;height:100vh}",""])},"3vlW":function(t,e,n){var a=n("eu4O");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("rjj0")("28eb0ec5",a,!1,{sourceMap:!1})},"5zde":function(t,e,n){n("zQR9"),n("qyJz"),t.exports=n("FeBl").Array.from},"6kS2":function(t,e,n){"use strict";var a=n("RR7x"),r=n("OLK5"),o=!1;var i=function(t){o||n("3vlW")},s=n("VU/8")(a.a,r.a,!1,i,"data-v-49c7631e",null);s.options.__file="components/map.vue",e.a=s.exports},AhXS:function(t,e,n){"use strict";var a=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"header"}},[e("nuxt-link",{staticClass:"logo",attrs:{exact:"",to:"/"}},[e("h1",[this._v("Traveling Circus of Urbanism")])]),e("br"),e("div",{staticClass:"sublinks"},[e("nuxt-link",{attrs:{to:"/about"}},[this._v("About")]),e("nuxt-link",{attrs:{to:"/contact"}},[this._v("Author")])],1)],1)};a._withStripped=!0;var r={render:a,staticRenderFns:[]};e.a=r},DLCH:function(t,e,n){"use strict";var a=function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"master"},[e("Map"),e("Header"),e("nuxt")],1)};a._withStripped=!0;var r={render:a,staticRenderFns:[]};e.a=r},GTE8:function(t,e,n){var a=n("/EEK");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("rjj0")("68fb2c45",a,!1,{sourceMap:!1})},Gu7T:function(t,e,n){"use strict";e.__esModule=!0;var a,r=n("c/Tr"),o=(a=r)&&a.__esModule?a:{default:a};e.default=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return(0,o.default)(t)}},KxRS:function(t,e){},Ma2J:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("znfv"),r=n("DLCH"),o=!1;var i=function(t){o||n("GTE8")},s=n("VU/8")(a.a,r.a,!1,i,null,null);s.options.__file="layouts/default.vue",e.default=s.exports},OLK5:function(t,e,n){"use strict";var a=function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"map"}})};a._withStripped=!0;var r={render:a,staticRenderFns:[]};e.a=r},RR7x:function(t,e,n){"use strict";var a=n("Dd8w"),r=n.n(a),o=n("fZjL"),i=n.n(o),s=n("Gu7T"),u=n.n(s),c=n("gRE1"),l=n.n(c),f=n("BO1k"),p=n.n(f);e.a={data:function(){return{map:null,currentMarkers:[],ready:!1}},computed:{mapMarkers:function(){return this.$store.state.mapMarkers},highlight:function(){return this.$store.state.highlightedLocation},uniqueLocations:function(){var t={},e=!0,n=!1,a=void 0;try{for(var r,o=p()(this.mapMarkers);!(e=(r=o.next()).done);e=!0){var i=r.value,s=i.locationName?i.locationName.toLowerCase():"";t[s]||(t[s]=[]),t[s].push(i)}}catch(t){n=!0,a=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw a}}return t},markerData:function(){if(this.uniqueLocations){var t={type:"FeatureCollection",features:[]},e=!0,n=!1,a=void 0;try{for(var r,o=p()(l()(this.uniqueLocations));!(e=(r=o.next()).done);e=!0){var i=r.value;i[0].locationName&&t.features.push({type:"Feature",geometry:{type:"Point",coordinates:[i[0].position.center[0],i[0].position.center[1]]},properties:{locationName:i[0].locationName,posts:[].concat(u()(i))}})}}catch(t){n=!0,a=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw a}}return t}},mapPosition:function(){if(this.uniqueLocations&&0!==i()(this.uniqueLocations).length){if(1===this.mapMarkers.length)return this.mapMarkers[0].position;var t=0,e=0,n=0,a=l()(this.uniqueLocations),o=a.length,s=!0,u=!1,c=void 0;try{for(var f,d=p()(a);!(s=(f=d.next()).done);s=!0){var h=f.value;t+=h[0].position.center[0],e+=h[0].position.center[1],n+=h[0].position.zoom}}catch(t){u=!0,c=t}finally{try{!s&&d.return&&d.return()}finally{if(u)throw c}}var v=r()({},a[0][0].position);return v.center=[t/o,e/o],v.zoom=n/o-1,v}}},watch:{mapPosition:function(t){this.tryUpdateMap(t)},markerData:function(t){var e=this;t&&(this.currentMarkers.forEach(function(t){t.remove()}),this.currentMarkers=[],this.markerData.features.sort(function(t,e){return t.geometry.coordinates[1]<e.geometry.coordinates[1]}).forEach(function(t){var n=new mapboxgl.Popup({offset:20,closeButton:!1,location:t.properties.locationName}),a=document.createElement("div");a.className="marker";var r=document.createElement("div");r.className="pin";var o=document.createElement("div");o.className="text";var i=document.createTextNode(t.properties.locationName);o.appendChild(i),a.appendChild(o),a.appendChild(r),a.addEventListener("click",function(n){return e.routeTo(t.properties.locationName)});var s=new mapboxgl.Marker(a).setLngLat(t.geometry.coordinates).setPopup(n).addTo(e.map);e.currentMarkers.push(s)}))},highlight:function(t,e){var n=this.currentMarkers.find(function(t){return t._popup.options.location===e});n&&n._element.classList.remove("highlight");var a=this.currentMarkers.find(function(e){return e._popup.options.location===t});a&&a._element.classList.add("highlight")}},mounted:function(){this.ready=!0,mapboxgl.accessToken=n("blTI").key,this.tryUpdateMap(this.mapPosition)},methods:{tryUpdateMap:function(t){if(!this.ready)return setTimeout(this.tryUpdateMap,200);var e=t||{bearing:0,center:[180,0],zoom:1,pitch:0};this.map?this.map.flyTo(e):this.map=new mapboxgl.Map(r()({container:"map",style:"mapbox://styles/mariko9012/cjh4gkzlw31mc2sqsm3l0g4rk"},e))},routeTo:function(t){this.$router.push("/at/"+t.replace(" ","%20"))}}}},TmV0:function(t,e,n){n("fZOM"),t.exports=n("FeBl").Object.values},"YXP+":function(t,e,n){"use strict";var a=n("KxRS"),r=n.n(a),o=n("AhXS"),i=!1;var s=function(t){i||n("oPNC")},u=n("VU/8")(r.a,o.a,!1,s,"data-v-1a9bb128",null);u.options.__file="components/Header.vue",e.default=u.exports},blTI:function(t,e){t.exports={key:"pk.eyJ1IjoibWFyaWtvOTAxMiIsImEiOiJjaWt0cnk4MnMwMDB2eDFtMDh1bmozZ2gwIn0.zXoiIU4RmB7jKIgBrs0Vwg"}},"c/Tr":function(t,e,n){t.exports={default:n("5zde"),__esModule:!0}},eu4O:function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,"#map[data-v-49c7631e]{height:120vh;position:relative;top:-10vh;background:#ddd;z-index:2}",""])},fBQ2:function(t,e,n){"use strict";var a=n("evD5"),r=n("X8DO");t.exports=function(t,e,n){e in t?a.f(t,e,r(0,n)):t[e]=n}},fZOM:function(t,e,n){var a=n("kM2E"),r=n("mbce")(!1);a(a.S,"Object",{values:function(t){return r(t)}})},gRE1:function(t,e,n){t.exports={default:n("TmV0"),__esModule:!0}},mbce:function(t,e,n){var a=n("lktj"),r=n("TcQ7"),o=n("NpIQ").f;t.exports=function(t){return function(e){for(var n,i=r(e),s=a(i),u=s.length,c=0,l=[];u>c;)o.call(i,n=s[c++])&&l.push(t?[n,i[n]]:i[n]);return l}}},oPNC:function(t,e,n){var a=n("+VuX");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("rjj0")("3551df7e",a,!1,{sourceMap:!1})},qyJz:function(t,e,n){"use strict";var a=n("+ZMJ"),r=n("kM2E"),o=n("sB3e"),i=n("msXi"),s=n("Mhyx"),u=n("QRG4"),c=n("fBQ2"),l=n("3fs2");r(r.S+r.F*!n("dY0y")(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,r,f,p=o(t),d="function"==typeof this?this:Array,h=arguments.length,v=h>1?arguments[1]:void 0,m=void 0!==v,b=0,x=l(p);if(m&&(v=a(v,h>2?arguments[2]:void 0,2)),void 0==x||d==Array&&s(x))for(n=new d(e=u(p.length));e>b;b++)c(n,b,m?v(p[b],b):p[b]);else for(f=x.call(p),n=new d;!(r=f.next()).done;b++)c(n,b,m?i(f,v,[r.value,b],!0):r.value);return n.length=b,n}})},znfv:function(t,e,n){"use strict";var a=n("6kS2"),r=n("YXP+");e.a={components:{Map:a.a,Header:r.default}}}});