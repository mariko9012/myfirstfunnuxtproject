(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{249:function(t,e,o){var content=o(255);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(12).default)("29d1d60a",content,!0,{sourceMap:!1})},250:function(t,e,o){t.exports=o.p+"img/1135b2b.svg"},251:function(t,e,o){t.exports=o.p+"img/6de5be5.svg"},252:function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNDU2cHgiIGhlaWdodD0iNDU2cHgiIHZpZXdCb3g9IjAgMCA0NTYgNDU2IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0My4xICgzOTAxMikgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+ZmFjZWJvb2s8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz48L2RlZnM+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iZmFjZWJvb2siIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0iI0ZGRkZGRiI+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0wLDAgTDAsNDU1LjczIEwyNDIuNzA0LDQ1NS43MyBMMjQyLjcwNCwyNzkuNjkxIEwxODMuMzc0LDI3OS42OTEgTDE4My4zNzQsMjA3LjgyNyBMMjQyLjcwNCwyMDcuODI3IEwyNDIuNzA0LDE0Ny40NzQgQzI0Mi43MDQsMTAzLjU4MSAyNzguMjg2LDY3Ljk5OSAzMjIuMTc5LDY3Ljk5OSBMMzg0LjIwNCw2Ny45OTkgTDM4NC4yMDQsMTMyLjYyMSBMMzM5LjgyMiwxMzIuNjIxIEMzMjUuODc1LDEzMi42MjEgMzE0LjU2OCwxNDMuOTI4IDMxNC41NjgsMTU3Ljg3NSBMMzE0LjU2OCwyMDcuODI4IEwzODMuMDg5LDIwNy44MjggTDM3My42MTksMjc5LjY5MiBMMzE0LjU2OCwyNzkuNjkyIEwzMTQuNTY4LDQ1NS43MyBMNDU1LjczLDQ1NS43MyBMNDU1LjczLDAgTDAsMCBaIiBpZD0iU2hhcGUiPjwvcGF0aD4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="},253:function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMC8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9UUi8yMDAxL1JFQy1TVkctMjAwMTA5MDQvRFREL3N2ZzEwLmR0ZCI+PHN2ZyB2ZXJzaW9uPSIxLjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgOTguOTE4IDEwMCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgOTguOTE4IDEwMCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PGcgZmlsbD0id2hpdGUiPjxlbGxpcHNlIGN4PSIxMy41NjYiIGN5PSI4Ni4yODYiIHJ4PSIxMy41NjYiIHJ5PSIxMy43MTQiPjwvZWxsaXBzZT48cGF0aCBkPSJNNjUuNTY5LDEwMEg0Ni4zNWMwLTI1Ljg3OS0yMC43NTItNDYuODU4LTQ2LjM1LTQ2Ljg1OGwwLDBWMzMuNzE1QzM2LjIxNCwzMy43MTUsNjUuNTY5LDYzLjM5MSw2NS41NjksMTAweiI+PC9wYXRoPjxwYXRoIGQ9Ik03OS4xMzUsMTAwYzAtNDQuMTgzLTM1LjQyOS04MC03OS4xMzUtODBWMGM1NC42MzEsMCw5OC45MTgsNDQuNzcyLDk4LjkxOCwxMDBINzkuMTM1eiI+PC9wYXRoPjwvZz48L3N2Zz4="},254:function(t,e,o){"use strict";var n=o(249);o.n(n).a},255:function(t,e,o){(t.exports=o(11)(!1)).push([t.i,".footer[data-v-997066da]{grid-column:1/-1;margin:96px -48px -48px;color:hsla(0,0%,100%,.6);background:#1f1f1f;padding:48px;box-shadow:0 5000vh 0 5000vh #1f1f1f}.footer *[data-v-997066da]{text-align:center}@media (max-width:768px){.footer[data-v-997066da]{margin:36px -18px -18px;padding:18px}}.footer .images>*[data-v-997066da]{opacity:.7;padding:10px;transition:all .2s}.footer .images[data-v-997066da]>:hover{opacity:1}.footer .footertext[data-v-997066da]{opacity:.8}",""])},258:function(t,e,o){"use strict";var n=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"footer"},[e("p",{staticClass:"images"},[e("a",{attrs:{href:"mailto:travelingcircusofurbanism@gmail.com"}},[e("img",{staticStyle:{"padding-top":"4px"},attrs:{src:o(250),width:"26px",height:"26px"}})]),this._v(" "),e("a",{attrs:{href:"https://www.instagram.com/mariko_urbannomad/",target:"_blank"}},[e("img",{attrs:{src:o(251),width:"22px",height:"22px"}})]),this._v(" "),e("a",{attrs:{href:"https://www.facebook.com/travelingcircusofurbanism/",target:"_blank"}},[e("img",{attrs:{src:o(252),width:"20px",height:"20px"}})]),this._v(" "),e("a",{attrs:{href:"https://www.travelingcircusofurbanism.com/feed.xml",target:"_blank"}},[e("img",{attrs:{src:o(253),width:"20px",height:"20px"}})])]),this._v(" "),e("p",{staticClass:"footertext"},[this._v("\n    All content copyright Mariko Sugita, except where noted.\n    "),e("br"),this._v(" "),e("a",{attrs:{href:"mailto:travelingcircusofurbanism@gmail.com"}},[this._v("Get in touch!")])])])}],r=(o(254),o(1)),component=Object(r.a)({},function(){var t=this.$createElement;this._self._c;return this._m(0)},n,!1,null,"997066da",null);e.a=component.exports},271:function(t,e,o){var content=o(291);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(12).default)("4684e527",content,!0,{sourceMap:!1})},272:function(t,e,o){var content=o(293);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(12).default)("361e9126",content,!0,{sourceMap:!1})},273:function(t,e,o){var content=o(295);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(12).default)("455c6d22",content,!0,{sourceMap:!1})},290:function(t,e,o){"use strict";var n=o(271);o.n(n).a},291:function(t,e,o){(t.exports=o(11)(!1)).push([t.i,".relatedposts[data-v-bad0e8ce]{margin-bottom:60px}.citylink[data-v-bad0e8ce]{text-decoration:none}.citylink[data-v-bad0e8ce]:hover{text-decoration:underline}.postgrid[data-v-bad0e8ce]{display:flex}@media (max-width:768px){.postgrid[data-v-bad0e8ce]{display:grid}}.relatedpost[data-v-bad0e8ce]{flex:1;display:block;height:100%;text-decoration:none;color:#1f1f1f}.relatedpost[data-v-bad0e8ce]:hover{color:#00adcc}.relatedpost[data-v-bad0e8ce]:not(:last-of-type){margin-right:24px}@media (max-width:768px){.relatedpost[data-v-bad0e8ce]{margin-bottom:30px;text-align:center;text-decoration:underline}.relatedpost[data-v-bad0e8ce]:not(:last-of-type){margin-right:0}}.relatedpost[data-v-bad0e8ce]:hover{text-decoration:underline}.relatedpost .relatedimage[data-v-bad0e8ce]{background-size:cover;height:180px;margin-bottom:12px}",""])},292:function(t,e,o){"use strict";var n=o(272);o.n(n).a},293:function(t,e,o){(t.exports=o(11)(!1)).push([t.i,".tags[data-v-4d5ef097]{position:relative;top:-12px}.sub[data-v-4d5ef097]{opacity:1}.tag[data-v-4d5ef097]{margin-right:6px;color:#00adcc!important}.tag[data-v-4d5ef097]:hover{text-decoration:underline}",""])},294:function(t,e,o){"use strict";var n=o(273);o.n(n).a},295:function(t,e,o){(t.exports=o(11)(!1)).push([t.i,"h1[data-v-d5705834]{margin-bottom:12px}.japanese-available[data-v-d5705834]{background:#00adcc;color:#fff;text-align:center}@media (max-width:768px){.japanese-available[data-v-d5705834]{margin-bottom:18px}}.markdown[data-v-d5705834]{min-height:30vh}@media (max-width:768px){.details[data-v-d5705834]{margin-top:0}}",""])},296:function(t,e,o){"use strict";o.r(e);o(23),o(16),o(14);var n=o(5),r=(o(6),o(7),o(82),o(42),o(41),o(34),o(3)),c=o(150),l=o.n(c),h=(o(83),o(10)),d=o(258),m=o(107),y=(o(43),o(32)),v={props:["city","current"],data:function(){return{allCityPosts:[]}},computed:{userLanguage:function(){return this.$i18n.locale},posts:function(){return this.$store.state.currentShowablePosts},postsToDisplay:function(){var t=[],e=!0,o=!1,n=void 0;try{for(var r,c=this.allCityPosts[Symbol.iterator]();!(e=(r=c.next()).done);e=!0){var p=r.value;if(this.current!==p.slug&&(p.languages[this.userLanguage]||p.languages.en)&&t.push(p),t.length===this.relatedPostCount)return t}}catch(t){o=!0,n=t}finally{try{e||null==c.return||c.return()}finally{if(o)throw n}}return t},relatedPostCount:function(){return this.$store.state.isMobile?2:3}},mounted:function(){var t=this;this.city&&(this.allCityPosts=this.posts.filter(function(p){return p.city===t.city.toLowerCase()&&!0===p.public[t.userLanguage]}))},methods:{capitalize:y.capitalize}},f=(o(290),o(1)),w=Object(f.a)(v,function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.postsToDisplay.length>0?o("div",{staticClass:"relatedposts"},[o("div",{staticClass:"sectionhead"},[t._v("\n    More posts from\n    "),o("nuxt-link",{staticClass:"citylink",attrs:{to:t.localePath({name:"city",params:{city:t.city}})}},[t._v("\n      "+t._s(t.capitalize(t.city))+"\n    ")])],1),t._v(" "),o("div",{staticClass:"postgrid"},t._l(t.postsToDisplay,function(e,n){return o("nuxt-link",{key:n,staticClass:"relatedpost",attrs:{to:t.localePath({name:"city-post",params:{city:t.city,post:e.slug}})}},[o("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:e.image,expression:"post.image",arg:"background-image"}],staticClass:"relatedimage"}),t._v(" "),o("div",[t._v(t._s("ja"===t.userLanguage&&e.title.ja&&!0===e.public.ja?e.title.ja||e.title.en:e.title.en||e.title.ja))])])}),1)]):t._e()},[],!1,null,"bad0e8ce",null).exports,x={props:["tags"],methods:{capitalize:y.capitalize}},M=(o(292),Object(f.a)(x,function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.tags&&t.tags.length>0?o("div",{staticClass:"tags sub"},t._l(t.tags,function(e){return o("nuxt-link",{key:e,staticClass:"tag",attrs:{to:"/tag/"+e}},[t._v("#"+t._s(e))])}),1):t._e()},[],!1,null,"4d5ef097",null).exports),L={props:["title","content","category","mapPosition","city","date","slug","description","publicPath","image","polygons","public","preview","tags","languages","displayLanguage"],components:{ContentFooter:d.a,RelatedArticles:w,PostDetails:m.a,Tags:M},data:function(){return{}},computed:{isDev:function(){return this.$store.state.viewingAsDev},isMobile:function(){return this.$store.state.isMobile},userLanguage:function(){return this.$i18n.locale},currentShowablePosts:function(){return this.$store.state.currentShowablePosts},allPosts:function(){return this.$store.state.allPosts},contentToDisplay:function(){if(!this.content||0===this.content.length)return"";var t=this.highlightLocationText();return this.$nextTick(this.addImageInteraction),this.$nextTick(this.addMapMoveOnHighlightTextHover),t}},mounted:function(){var t=this;this.resetView(),this.$store.commit("setHighlight",this.polygons?Array.isArray(this.mapPosition)?[].concat(Object(h.a)(this.mapPosition),Object(h.a)(this.polygons)):[this.mapPosition].concat(Object(h.a)(this.polygons)):this.mapPosition),this.$nextTick(function(){t.$el.scrollTop=0,t.$el.parentNode.scrollTop=0,document.querySelector("body").scrollTop=0,window.scrollTo(0,0)}),this.$nextTick(function(){t.public[t.displayLanguage]||t.isDev||!t.preview||t.$store.commit("setMapMarkers",t.allPosts)})},beforeDestroy:function(){this.public[this.displayLanguage]||this.isDev||!this.preview||this.$store.commit("setMapMarkers",this.currentShowablePosts),this.$store.commit("setHighlight"),this.$store.commit("setViewPolygons")},methods:{doubleHighlight:function(t){this.$store.commit("setHighlight",t)},unDoubleHighlight:function(){this.$store.commit("setHighlight")},resetView:function(){this.$store.commit("setView",this.mapPosition),this.$store.commit("setViewPolygons",this.polygons),this.$store.commit("setCity",this.city),this.$store.commit("setPan",!1)},highlightLocationText:function(){if(!this.mapPosition&&!this.polygons||!Array.isArray(this.mapPosition)&&!this.polygons||1===this.mapPosition.length&&!this.polygons||this.isMobile)return this.content;var t=this.content.replace(/&amp;/g,"&");return(this.polygons?[].concat(Object(h.a)(this.mapPosition),Object(h.a)(this.polygons)):this.mapPosition).map(function(t){return t.location}).forEach(function(e){if(!(e.length<4)){e=e.replace("’","'");var o=new RegExp("[s\n >]".concat(e),"gi");t=t.replace(o,function(t){return t.replace(new RegExp("".concat(e),"gi"),'<span class="highlight">'.concat(e,"</span>"))})}}),t},addMapMoveOnHighlightTextHover:function(){var t=this;if((this.mapPosition||this.polygons)&&(Array.isArray(this.mapPosition)||this.polygons)&&(1!==this.mapPosition.length||this.polygons)&&!this.isMobile&&this.$refs&&this.$refs.postcontent){var e=this.polygons?[].concat(Object(h.a)(this.mapPosition),Object(h.a)(this.polygons)):this.mapPosition;this.$refs.postcontent.querySelectorAll(".highlight").forEach(function(o){var n=o.innerHTML.toLowerCase().replace("&amp;","&"),r=e.find(function(p){return p.location&&n===p.location.toLowerCase()});r&&(o.addEventListener("mouseover",function(){t.doubleHighlight(r.location),r.coordinates?(t.$store.commit("setView"),t.$store.commit("setViewPolygons",[r])):t.$store.commit("setView",r)}),o.addEventListener("mouseout",t.unDoubleHighlight))})}},addImageInteraction:function(){var t=this;this.$el&&this.$refs.postcontent.querySelectorAll("img").forEach(function(e){e.addEventListener("click",function(){return t.$store.commit("setLightboxSrc",e.getAttribute("src"))})})}}},j=(o(294),Object(f.a)(L,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",{staticClass:"content"},[t.isDev&&t.languages.ja&&t.languages.en?o("div",{staticClass:"japanese-available content-top-full ja"},["ja"!==t.displayLanguage?[o("span",[t._v("Hi Dev! Showing the English version.")]),t._v(" "),o("nuxt-link",{staticClass:"button",attrs:{to:t.switchLocalePath("ja")}},[t._v("Switch to Japanese")])]:[o("span",[t._v("Hi Dev! Showing the Japanese version.")]),t._v(" "),o("nuxt-link",{staticClass:"button",attrs:{to:t.switchLocalePath("en")}},[t._v("Switch to English")])]],2):t._e(),t._v(" "),o("h1",{class:{ja:"ja"===t.displayLanguage},on:{click:t.resetView}},[t._v(t._s(t.title[t.displayLanguage]))]),t._v(" "),o("PostDetails",{staticClass:"details",attrs:{category:t.category,mapPosition:t.mapPosition,city:t.city,date:t.date}}),t._v(" "),o("Tags",{attrs:{tags:t.tags}}),t._v(" "),o("article",{directives:[{name:"lazy-container",rawName:"v-lazy-container",value:{selector:"img[data-src]",preLoad:2},expression:"{\n      selector: 'img[data-src]',\n      preLoad: 2, // screen heights away to start loading\n    }"}],ref:"postcontent",staticClass:"markdown",class:{ja:"ja"===t.displayLanguage},domProps:{innerHTML:t._s(t.contentToDisplay)}}),t._v(" "),o("RelatedArticles",{attrs:{city:t.city,current:t.slug}}),t._v(" "),o("ContentFooter")],1)},[],!1,null,"d5705834",null).exports);function I(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable})),e.push.apply(e,o)}return e}function P(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?I(source,!0).forEach(function(e){Object(n.a)(t,e,source[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):I(source).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))})}return t}var D,C=o(32).capitalize,z={scrollToTop:!0,head:function(){var meta=[{property:"og:title",content:this.capitalize(this.title[this.displayLanguage]||this.title.en||this.title.ja)},{hid:"og:type",property:"og:type",content:"article"},{hid:"og:description",property:"og:description",content:this.description[this.displayLanguage]||this.description.en||this.description.ja},{property:"description",content:this.description[this.displayLanguage]||this.description.en||this.description.ja,hid:"description"},{property:"og:url",content:"https://www.travelingcircusofurbanism.com".concat(this.localePath({name:"city-post",params:{city:this.city,post:this.slug}}))},{hid:"og:image",property:"og:image",content:this.image?"http"===this.image.substring(0,4)?this.image:"https://www.travelingcircusofurbanism.com".concat(encodeURI(this.image)):"https://www.travelingcircusofurbanism.com/assets/sitethumbnail.jpg"}];return this.displayLanguage!==this.$i18n.locale&&meta.push({rel:"canonical",href:"https://www.travelingcircusofurbanism.com".concat(this.switchLocalePath(this.displayLanguage))}),{title:this.capitalize(this.title[this.displayLanguage]||this.title.en||this.title.ja),meta:meta}},components:{PostFullDisplay:j},asyncData:(D=Object(r.a)(regeneratorRuntime.mark(function t(e){var o,n,r,c,h,path,d,m,content,y,v;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.route,e.redirect,n=e.error,e.env,r=e.store,!(o.path.indexOf("_nuxt/")>-1)){t.next=3;break}return t.abrupt("return",n({statusCode:404,message:"Page not found."}));case 3:if(c=decodeURI(o.path).replace("/ja/","/").replace(/\/$/,"").replace(/^\/?[^\/]*\//g,""),h=decodeURI(o.path).replace("/ja/","/").replace(/^\//g,"").replace(/\/.*$/g,"").toLowerCase(),path="/posts/".concat(h,"/").concat(c,"/"),d="/".concat(h,"/").concat(c,"/"),m=r.state.allPosts.find(function(p){return h===p.city&&c.toLowerCase()===p.slug.toLowerCase()})){t.next=12;break}return console.log("Error: Unable to find generated data for "+path),t.abrupt("return",n({statusCode:404,message:"Page not found."}));case 12:content={},t.next=19;break;case 19:return y={validateStatus:function(t){return!0}},v=[],t.prev=21,m.languages.en&&v.push(l.a.get(path+"en.html",y).then(function(t){return content.en=t.data}).catch(function(t){return console.log(t)})),m.languages.ja&&v.push(l.a.get(path+"ja.html",y).then(function(t){return content.ja=t.data}).catch(function(t){return console.log(t)})),t.next=26,Promise.all(v);case 26:t.next=32;break;case 28:return t.prev=28,t.t0=t.catch(21),console.log(t.t0),t.abrupt("return",n({statusCode:404,message:"Page not found."}));case 32:if(content.en||content.ja){t.next=34;break}return t.abrupt("return",n({statusCode:404,message:"Page not found."}));case 34:return t.abrupt("return",P({path:path,publicPath:d,slug:c,city:h,content:content,preview:m.preview,tags:[]},m,{mapPosition:m.mapPosition?Array.isArray(m.mapPosition)?m.mapPosition:[m.mapPosition]:[],polygons:m.polygons?m.polygons:null}));case 35:case"end":return t.stop()}},t,null,[[21,28]])})),function(t){return D.apply(this,arguments)}),computed:{isDev:function(){return this.$store.state.viewingAsDev},displayLanguage:function(){return this.content[this.$i18n.locale]&&(this.public[this.$i18n.locale]||this.isDev)?this.$i18n.locale:this.content.en&&(!0===this.public.en||this.isDev)?"en":this.content.ja&&(!0===this.public.ja||this.isDev)?"ja":null}},created:function(){this.$store.commit("setBreadcrumbs",[{label:this.city,url:this.localePath({name:"city",params:{city:this.city}})},{label:this.title[this.$i18n.locale]||this.title.en||this.title.ja,url:this.localePath({name:"city-post",params:{city:this.city,post:this.slug}})}])},methods:{capitalize:C}},N=Object(f.a)(z,function(){var t=this,e=t.$createElement;return(t._self._c||e)("PostFullDisplay",{key:(t.title.en||t.title.ja)+t.$i18n.locale,attrs:{title:t.title,content:t.content[t.displayLanguage],category:t.category,mapPosition:t.mapPosition,city:t.city,date:t.date,slug:t.slug,description:t.description,publicPath:t.publicPath,image:t.image,polygons:t.polygons,public:t.public,preview:t.preview,tags:t.tags,languages:t.languages,displayLanguage:t.displayLanguage}})},[],!1,null,"478d3007",null);e.default=N.exports}}]);