(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{278:function(t,e,o){"use strict";o(42),o(30),o(33);var n=o(270),r=o(279),c=o(106),l={components:{ContentFooter:n.a,PostList:r.a,BlueBanner:c.a},props:{postListTitle:{required:!0},posts:{required:!0},marker:{required:!1}},scrollToTop:!0,data:function(){return{skippingToFirstPost:!1,clientLanguage:this.$i18n.locale}},computed:{isMobile:function(){return this.$store.state.isMobile},isDev:function(){return this.$store.state.viewingAsDev},userLanguage:function(){return this.$i18n.locale},showablePosts:function(){var t=this;return this.posts.filter((function(p){return t.$store.state.currentShowablePosts.includes(p)}))}},beforeDestroy:function(){this.$store.commit("setHighlight")},created:function(){if(1===this.showablePosts.length){this.$store.commit("setHighlight"),this.$store.commit("setViewPolygons"),this.skippingToFirstPost=!0;var t=this.showablePosts[0];return this.$router.replace({path:this.localePath({name:"city-post",params:{city:t.city,post:t.slug}})})}},mounted:function(){if(!this.skippingToFirstPost)if(this.clientLanguage=(window?window.navigator.userLanguage||window.navigator.language:"en").substring(0,2),this.$el.parentElement.scrollTop=0,this.$store.commit("setPan",!1),this.$store.commit("setHighlight"),this.$store.commit("setHighlight"),this.marker)this.$store.commit("setView",this.marker),this.$store.commit("setHighlight",this.marker);else{this.$store.commit("setView",this.showablePosts);var t=this.showablePosts.map((function(p){return p.polygons})).filter((function(p){return p})).reduce((function(t,p){return t.concat(p)}),[]);t.length>0&&this.$store.commit("setViewPolygons",t),this.$store.commit("setHighlight",this.showablePosts)}},methods:{}},h=o(3),component=Object(h.a)(l,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[0===t.showablePosts.length&&t.clientLanguage===t.$i18n.locale?o("BlueBanner",{scopedSlots:t._u([{key:"ja",fn:function(){return[t._v("\n      ここの日本語の記事はまだありません。\n      "),o("nuxt-link",{attrs:{to:t.localePath("index"),exact:""}},[t._v("ホームに戻る")]),t._v("と日本語での記事があります！\n    ")]},proxy:!0}],null,!1,1802923211)},[t._v("\n    There are no English posts here yet!\n    "),o("nuxt-link",{attrs:{to:t.localePath("index"),exact:""}},[t._v("Check out our home page")]),t._v(" "),o("span",[t._v("to find articles in English.")])],1):t._e(),t._v(" "),o("section",{key:Date.now(),staticClass:"content"},[o("PostList",{attrs:{posts:t.showablePosts,title:t.postListTitle}}),t._v(" "),o("ContentFooter")],1)],1)}),[],!1,null,"0de55aba",null);e.a=component.exports},331:function(t,e,o){"use strict";o.r(e);o(51),o(30),o(33),o(42),o(34);var n=o(4),r=o(170),c=o.n(r),l=o(278),h=o(47).capitalize,m={components:{PostListPage:l.a},scrollToTop:!0,layout:"default",head:function(){var t="Urbanist case studies, interviews, and stories from ".concat(this.capitalize(this.location)," on the Traveling Circus of Urbanism."),meta=[{property:"og:title",content:"".concat(this.capitalize(this.location)," | Traveling Circus of Urbanism")},{hid:"description",name:"description",content:t},{hid:"og:description",property:"og:description",content:t},{hid:"og:url",property:"og:url",content:"https://www.travelingcircusofurbanism.com/at/".concat(this.location)},{hid:"og:image",property:"og:image",content:this.posts[0]?"http"===this.posts[0].image.substring(0,4)?this.posts[0].image:"https://www.travelingcircusofurbanism.com".concat(this.posts[0].image):"https://www.travelingcircusofurbanism.com/assets/sitethumbnail.jpg"}];return this.posts&&0!==this.posts.length||(meta.push({rel:"canonical",href:"https://www.travelingcircusofurbanism.com".concat(this.switchLocalePath("ja"===this.$i18n.locale?"en":"ja"))}),meta.push({name:"robots",content:"noindex"})),{title:this.capitalize(this.location),meta:meta}},asyncData:function(t){return Object(n.a)(regeneratorRuntime.mark((function e(){var o,n,r,l,h,m,f,d,w,marker;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=t.route,n=t.redirect,r=t.error,l=t.store,h=t.app,m=decodeURIComponent(decodeURIComponent(o.path)).replace("/ja/","/").replace("/at/","").replace(/\/$/,"").toLowerCase(),f=[],e.next=8;break;case 8:return e.prev=8,d={validateStatus:function(t){return!0}},e.next=12,c.a.get("/generated/locations.json",d).then((function(t){return f=t.data})).catch((function(t){return console.log(t)}));case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(8),console.log(e.t0),e.abrupt("return",r({statusCode:404,message:"Page not found."}));case 18:if(f.includes(m)){e.next=20;break}return e.abrupt("return",r({statusCode:404,message:"Page not found."}));case 20:if(w=l.viewingAsDev?l.state.allPosts:l.state.currentShowablePosts,marker={},1!==(w=w.filter((function(p){var t=(Array.isArray(p.mapPosition)?p.mapPosition:[p.mapPosition]).concat(p.polygons).filter((function(p){return p}));if(t.length>0){var e=t.find((function(t){return t.location&&t.location.toLowerCase()===m}));return e&&(marker=e),e}}))).length){e.next=25;break}return e.abrupt("return",n(h.localePath({name:"city-post",params:{city:w[0].city,post:w[0].slug}})));case 25:return e.abrupt("return",{posts:w,location:m,marker:marker});case 26:case"end":return e.stop()}}),e,null,[[8,14]])})))()},created:function(){this.$store.commit("setBreadcrumbs",[{label:"at: "+this.location,url:this.localePath({name:"at-location",params:{location:this.location}})}])},methods:{capitalize:h}},f=o(3),component=Object(f.a)(m,(function(){var t=this.$createElement;return(this._self._c||t)("PostListPage",{attrs:{postListTitle:this.location,posts:this.posts,marker:this.marker}})}),[],!1,null,"a87119dc",null);e.default=component.exports}}]);